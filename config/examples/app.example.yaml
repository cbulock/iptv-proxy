# Application Configuration
# This file contains optional application-level settings.

# ============================================================================
# Base URL Configuration
# ============================================================================

# Optional: Set a custom base URL for the application
# This is useful when running behind a reverse proxy or using a custom domain
# If not set, the base URL is automatically detected from request headers
# base_url: "https://iptv.example.com"

# Examples:
# - Direct access: Leave commented (auto-detect)
# - Behind nginx: base_url: "https://iptv.example.com"
# - Custom port: base_url: "https://iptv.example.com:8443"
# - Subdirectory: base_url: "https://example.com/iptv"

# ============================================================================
# Admin Authentication Configuration
# ============================================================================

# Optional: Enable authentication for the admin UI and API endpoints
# If not configured, the admin interface is accessible without authentication
# IMPORTANT: Change the default password before deploying to production!

# admin_auth:
#   username: "admin"
#   password: "changeme"  # Use plaintext (not recommended) or bcrypt hash

# Examples:
# - Enable authentication with plaintext password (legacy, not recommended):
#   admin_auth:
#     username: "admin"
#     password: "your-secure-password-here"
#
# - Enable authentication with bcrypt hashed password (recommended):
#   Generate hash: node scripts/hash-password.js your-password
#   admin_auth:
#     username: "admin"
#     password: "$2a$10$XxXxXxXxXxXxXxXxXxXxXuXxXxXxXxXxXxXxXxXxXxXxXxXxXx"
#
# - Disable authentication (default):
#   Leave commented or remove the admin_auth section
#
# Security Notes:
# - Bcrypt hashed passwords are automatically detected and more secure
# - Even with hashed passwords, protect app.yaml with file permissions (chmod 600)
# - Never commit real credentials to version control

# ============================================================================
# Cache Configuration
# ============================================================================

# Configure caching behavior for parsed EPG and M3U data
# TTL values are in seconds. Set to 0 to disable caching (cache never expires until manually invalidated)

# cache:
#   # EPG cache TTL (default: 21600 = 6 hours)
#   # How long to cache parsed EPG data before re-fetching from sources
#   epg_ttl: 21600
#   
#   # M3U cache TTL (default: 3600 = 1 hour)
#   # How long to cache parsed M3U data before re-fetching from sources
#   m3u_ttl: 3600

# Examples:
# - Short TTL for frequently changing content:
#   cache:
#     epg_ttl: 1800    # 30 minutes
#     m3u_ttl: 600     # 10 minutes
#
# - Long TTL for stable content:
#   cache:
#     epg_ttl: 86400   # 24 hours
#     m3u_ttl: 43200   # 12 hours
#
# - No expiration (manual invalidation only):
#   cache:
#     epg_ttl: 0
#     m3u_ttl: 0

# ============================================================================
# Scheduler Configuration
# ============================================================================

# Note: Scheduler settings are currently hardcoded in the application.
# The following schedules are active by default:
# - Channel Health Check: Every 30 minutes (*/30 * * * *)
# - EPG Refresh: Every 6 hours (0 */6 * * *)
#
# To modify schedules, you'll need to edit server/scheduler.js
# Future versions may support configuration via this file.

# ============================================================================
# Image Proxy Configuration
# ============================================================================

# Image proxying is enabled by default for all channel logos and EPG images
# This helps avoid CORS issues and provides a consistent URL structure
# No configuration needed - works automatically

# ============================================================================
# HTTP Server Configuration
# ============================================================================

# Port configuration is set via environment variable or defaults to 34400
# To change: Set PORT environment variable before starting
# Example: PORT=8080 npm start

# ============================================================================
# Advanced Configuration Examples
# ============================================================================

# Example: Production setup
# base_url: "https://iptv.yourdomain.com"

# Example: Development setup
# base_url: "http://localhost:34400"

# Example: Behind a reverse proxy with subfolder
# base_url: "https://media.example.com/iptv"

# ============================================================================
# Configuration Notes:
# ============================================================================
# 
# Base URL:
# - Automatically detected from X-Forwarded-* headers if not explicitly set
# - Used for generating absolute URLs in M3U playlists and stream proxying
# - Should NOT include trailing slash
# - Must be accessible from your media player clients
# 
# Environment Variables:
# - PORT: HTTP server port (default: 34400)
# - CONFIG_PATH: Configuration directory path (default: ./config)
# - NODE_ENV: Node environment (development, production)
# 
# Scheduler:
# - Schedules are currently hardcoded (see note in Scheduler Configuration section)
# - Jobs can be manually triggered via API: POST /api/scheduler/jobs/:name/run
# - Available jobs: "Channel Health Check", "EPG Refresh"
# 
# ============================================================================
# Troubleshooting:
# ============================================================================
# 
# - Wrong URLs in M3U: Set base_url explicitly to match your proxy configuration
# - Scheduler not running: Check cron expression syntax, view logs for errors
# - CORS errors with images: Ensure image proxy is working (should be automatic)
# - Port conflict: Change PORT environment variable or check for conflicting services
# - Behind reverse proxy: Set base_url and ensure proxy passes X-Forwarded-* headers
# 
# For more help, see the README.md troubleshooting section.

# ============================================================================
# Reverse Proxy Headers
# ============================================================================
# 
# If running behind a reverse proxy, ensure these headers are forwarded:
# - X-Forwarded-Proto: Protocol (http/https)
# - X-Forwarded-Host: Original hostname
# - X-Forwarded-For: Client IP address
# - X-Real-IP: Client IP address (alternative to X-Forwarded-For)
# 
# See README.md for nginx, Caddy, and Traefik configuration examples.
